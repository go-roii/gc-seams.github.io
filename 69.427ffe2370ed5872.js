"use strict";(self.webpackChunkGCSEAMS=self.webpackChunkGCSEAMS||[]).push([[69],{9069:(ne,h,c)=>{c.r(h),c.d(h,{EventsModule:()=>te});var r=c(9808),p=c(8118),e=c(1223),E=c(7579);let d=(()=>{class n{constructor(){this.detailsPaneInfoChange=new E.x}get dpEventStartDate(){const t=this.eventInfo.event_start_date.split("[")[0].toString();return new Date(t)}get dpEventEndDate(){const t=this.eventInfo.event_end_date.split("[")[0].toString();return new Date(t)}get dpCurrentEventProgress(){let t=new Date;if(t>=this.dpEventEndDate)return 100;if(t>=this.dpEventStartDate){const i=(this.dpEventEndDate.getTime()-this.dpEventStartDate.getTime())/6e4;return Math.trunc(Math.round((t.getTime()-this.dpEventStartDate.getTime())/6e4)/i*100)}return 0}initializeDetailsPane(t){this.detailsPane=t,this.bsDetailsPane=new bootstrap.Offcanvas(this.detailsPane),this.detailsPane.addEventListener("hidden.bs.offcanvas",()=>{this.detailsPaneInfoChange.next({isDetailsPaneShown:!1,selectedEventCard:void 0,dpEventID:0,dpEventUUID:"",dpEventTitle:"",dpEventStartDate:void 0,dpEventEndDate:void 0,dpCurrentEventProgress:0,dpEventDescription:""})})}showDetailsPane(t){this.eventInfo=t,this.detailsPaneInfoChange.next({isDetailsPaneShown:!0,selectedEventCard:t.event_id,dpEventID:t.event_id,dpEventUUID:t.event_uuid,dpEventTitle:t.event_title,dpEventStartDate:this.dpEventStartDate,dpEventEndDate:this.dpEventEndDate,dpCurrentEventProgress:this.dpCurrentEventProgress,dpEventDescription:t.event_description}),this.bsDetailsPane.show()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y=["detailsPane"],C=function(n){return{"progress-bar-animated progress-bar-striped":n}};let x=(()=>{class n{constructor(t){this.detailsPaneService=t}ngOnInit(){}ngAfterViewInit(){this.instantiateDetailsPane(),this.subscribeToDetailsPaneChange()}subscribeToDetailsPaneChange(){this.detailsPaneService.detailsPaneInfoChange.subscribe(t=>{this.isDetailsPaneShown=t.isDetailsPaneShown,this.dpEventUUID=t.dpEventUUID,this.dpEventTitle=t.dpEventTitle,this.dpEventStartDate=t.dpEventStartDate,this.dpEventEndDate=t.dpEventEndDate,this.dpCurrentEventProgress=t.dpCurrentEventProgress,this.dpEventDescription=t.dpEventDescription})}instantiateDetailsPane(){this.detailsPaneService.initializeDetailsPane(this.detailsPane.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-events"]],viewQuery:function(t,i){if(1&t&&e.Gf(y,5),2&t){let a;e.iGM(a=e.CRH())&&(i.detailsPane=a.first)}},decls:40,vars:22,consts:[["id","events-body"],[1,"gs-header"],[1,"tabs","user-select-none"],[1,"nav"],["data-bs-dismiss","offcanvas","data-bs-target","#details-pane",1,"nav-item"],["routerLink","ongoing","routerLinkActive","active",1,"nav-link"],[1,"active-tab-indicator"],["routerLink","upcoming","routerLinkActive","active",1,"nav-link"],["routerLink","past","routerLinkActive","active",1,"nav-link"],["id","details-pane","data-bs-scroll","true","data-bs-backdrop","false","data-bs-keyboard","true","tabindex","-1",1,"offcanvas","offcanvas-end",2,"transition","none"],["detailsPane",""],[1,"offcanvas-header","p-4","pb-0"],["type","button","data-bs-dismiss","offcanvas",1,"btn-close","text-reset"],[1,"offcanvas-body","d-flex","flex-column","p-4"],["id","event-poster",1,"mb-4"],["width","100%","height","100%","fill","var(--bs-primary)"],["id","dp-event-title",1,"text-break","mb-0"],["id","dp-event-datetime",1,"text-primary"],[1,"progress","mb-3"],["role","progressbar",1,"progress-bar","rounded-pill",3,"ngClass"],["id","dp-event-description"],[1,"d-grid","mt-auto","p-4"],["type","button",1,"btn","btn-lg","btn-primary","shadow",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2"),e._uU(3,"My Events"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"ul",3),e.TgZ(6,"li",4),e.TgZ(7,"a",5),e._uU(8,"Ongoing"),e.qZA(),e._UZ(9,"div",6),e.qZA(),e.TgZ(10,"li",4),e.TgZ(11,"a",7),e._uU(12,"Upcoming"),e.qZA(),e._UZ(13,"div",6),e.qZA(),e.TgZ(14,"li",4),e.TgZ(15,"a",8),e._uU(16,"Past"),e.qZA(),e._UZ(17,"div",6),e.qZA(),e.qZA(),e.qZA(),e._UZ(18,"router-outlet"),e.TgZ(19,"div",9,10),e.TgZ(21,"div",11),e._UZ(22,"button",12),e.qZA(),e.TgZ(23,"div",13),e.O4$(),e.TgZ(24,"svg",14),e._UZ(25,"rect",15),e.qZA(),e.kcU(),e.TgZ(26,"h2",16),e._uU(27),e.qZA(),e.TgZ(28,"p",17),e._uU(29),e.ALo(30,"date"),e.ALo(31,"date"),e.ALo(32,"date"),e.qZA(),e.TgZ(33,"div",18),e._UZ(34,"div",19),e.qZA(),e.TgZ(35,"p",20),e._uU(36),e.qZA(),e.qZA(),e.TgZ(37,"div",21),e.TgZ(38,"button",22),e._uU(39,"View Attendance"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Udp("margin-right",i.isDetailsPaneShown?"400px":"0"),e.xp6(27),e.Oqu(i.dpEventTitle),e.xp6(2),e.lnq("",e.xi3(30,11,i.dpEventStartDate,"mediumDate")," - ",e.xi3(31,14,i.dpEventStartDate,"shortTime")," to ",e.xi3(32,17,i.dpEventEndDate,"shortTime"),""),e.xp6(5),e.Udp("width",i.dpCurrentEventProgress+"%"),e.Q6J("ngClass",e.VKq(20,C,i.dpCurrentEventProgress>0&&i.dpCurrentEventProgress<100)),e.xp6(2),e.Oqu(i.dpEventDescription),e.xp6(2),e.Q6J("routerLink",i.dpEventUUID))},directives:[p.yS,p.Od,p.lC,r.mk,p.rH],pipes:[r.uU],styles:["#events-body[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.tabs[_ngcontent-%COMP%]{background-color:#fff;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;padding:16px 32px 0}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tabs[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{gap:24px;width:max-content}.tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-size:16px;padding:4px 6px 8px}.tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:unset;font-weight:500}.tabs[_ngcontent-%COMP%]   .active-tab-indicator[_ngcontent-%COMP%]{display:none;min-height:3px;background-color:var(--bs-primary);border-radius:99px 99px 0 0}.tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%] + .active-tab-indicator[_ngcontent-%COMP%]{display:block}#event-poster[_ngcontent-%COMP%]{aspect-ratio:3/2;border-radius:16px}.progress[_ngcontent-%COMP%]{height:4px}"]}),n})();var g=c(5861),l=c(2033),v=c(555),m=c(4745);const P=function(n){return["/home/events",n]},T=function(n){return{"progress-bar-animated progress-bar-striped":n}};let u=(()=>{class n{constructor(){}ngOnInit(){this.formatDate(),this.getEventProgress()}formatDate(){const t=this.eventInfo.event_start_date.split("[")[0].toString(),i=this.eventInfo.event_end_date.split("[")[0].toString();this.eventStartDate=new Date(t),this.eventEndDate=new Date(i)}getEventProgress(){let t=new Date;if(t>=this.eventEndDate)this.currentEventProgress=100;else if(t>=this.eventStartDate){const i=(this.eventEndDate.getTime()-this.eventStartDate.getTime())/6e4;this.currentEventProgress=Math.trunc(Math.round((t.getTime()-this.eventStartDate.getTime())/6e4)/i*100),console.log("event duration: "+i+"min"),console.log("event progress: "+this.currentEventProgress+"%")}else this.currentEventProgress=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-event-card-view"]],inputs:{eventInfo:"eventInfo"},decls:14,vars:21,consts:[[1,"card","user-select-none"],[3,"routerLink","click"],[1,"card-img-top"],["width","100%","height","100%","fill","var(--bs-primary)"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-3"],[1,"progress"],["role","progressbar",1,"progress-bar","rounded-pill",3,"ngClass"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.NdJ("click",function(o){return o.stopPropagation}),e.O4$(),e.TgZ(2,"svg",2),e._UZ(3,"rect",3),e.qZA(),e.qZA(),e.kcU(),e.TgZ(4,"div",4),e.TgZ(5,"h5",5),e._uU(6),e.qZA(),e.TgZ(7,"p",6),e._uU(8),e.ALo(9,"date"),e.ALo(10,"date"),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",7),e._UZ(13,"div",8),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("routerLink",e.VKq(17,P,i.eventInfo.event_uuid)),e.xp6(5),e.Oqu(i.eventInfo.event_title),e.xp6(2),e.lnq("",e.xi3(9,8,i.eventStartDate,"mediumDate")," - ",e.xi3(10,11,i.eventStartDate,"shortTime")," to ",e.xi3(11,14,i.eventEndDate,"shortTime"),""),e.xp6(5),e.Udp("width",i.currentEventProgress+"%"),e.Q6J("ngClass",e.VKq(19,T,i.currentEventProgress>0&&i.currentEventProgress<100)))},directives:[p.yS,r.mk],pipes:[r.uU],styles:["[_nghost-%COMP%]{--card-aspect-ratio: 16/9}.selected[_nghost-%COMP%]   .card[_ngcontent-%COMP%], .selected   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{border:1px solid var(--bs-primary);box-shadow:0 0 6px rgb(var(--bs-primary-rgb),64%)}.card[_ngcontent-%COMP%], .card-img-top[_ngcontent-%COMP%]{aspect-ratio:var(--card-aspect-ratio)}.card-title[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;overflow:hidden;-webkit-box-orient:vertical}.card-subtitle[_ngcontent-%COMP%]{color:var(--bs-primary);font-size:14px}.progress[_ngcontent-%COMP%]{height:4px}"]}),n})(),_=(()=>{class n{constructor(){this.emptyMessage={title:"Title",message:"Message"}}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-empty-state"]],inputs:{emptyMessage:"emptyMessage"},decls:4,vars:2,consts:[["id","empty-title",1,"text-center","mb-3"],["id","empty-message",1,"text-muted"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"p",1),e._uU(3),e.qZA()),2&t&&(e.xp6(1),e.Oqu(i.emptyMessage.title),e.xp6(2),e.hij(" ",i.emptyMessage.message,"\n"))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}"]}),n})();function Z(n,s){1&n&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"span",5),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}const b=function(n){return{selected:n}};function D(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-event-card-view",9),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(3).openDetailsPane(o)}),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(2,b,i.selectedEventCard==t.event_id))("eventInfo",t)}}function O(n,s){if(1&n&&(e.TgZ(0,"div",7),e.YNc(1,D,1,4,"app-event-card-view",8),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.ongoingEvents)}}function w(n,s){if(1&n&&e.YNc(0,O,2,1,"div",6),2&n){const t=e.oxw(),i=e.MAs(4);e.Q6J("ngIf",!t.isFetchingEvents&&t.ongoingEvents.length>0)("ngIfElse",i)}}const S=function(){return{title:"No events yet...",message:"Click the button at the side navigation bar to create an event"}};function A(n,s){1&n&&(e.TgZ(0,"div",3),e._UZ(1,"app-empty-state",10),e.qZA()),2&n&&(e.xp6(1),e.Q6J("emptyMessage",e.DdM(1,S)))}let U=(()=>{class n{constructor(t,i,a){this.userService=t,this.dataService=i,this.detailsPaneService=a,this.searchText="",this.ongoingEvents=[],this.isFetchingEvents=!0,this.detailsPaneService.detailsPaneInfoChange.subscribe(o=>{this.selectedEventCard=o.dpEventID})}ngOnInit(){this.fetchOngoingEvents()}fetchOngoingEvents(){var t=this;const i=new l.K;i.EndPoint="/events/ongoing",i.requestType=5,i.authToken=this.userService.HttpOptions,this.dataService.httpRequest(i).subscribe(function(){var a=(0,g.Z)(function*(o){t.setOngoingEvents(o),console.log(t.ongoingEvents),t.isFetchingEvents=!1,t.sortEvents()});return function(o){return a.apply(this,arguments)}}(),function(){var a=(0,g.Z)(function*(o){"Unauthorized"==o.statusText?(t.userService.refreshAccessToken(),t.userService.start()):(t.dataService.handleError(o),t.isFetchingEvents=!1)});return function(o){return a.apply(this,arguments)}}())}setOngoingEvents(t){this.ongoingEvents=t}sortEvents(){this.ongoingEvents.sort((t,i)=>new Date(t.event_start_date.split("[")[0]).valueOf()-new Date(i.event_start_date.split("[")[0]).valueOf())}openDetailsPane(t){this.detailsPaneService.showDetailsPane(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.K),e.Y36(m.D),e.Y36(d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ongoing"]],decls:5,vars:2,consts:[["style","display: flex; align-items: center; justify-content: center; margin: 300px 0;",4,"ngIf","ngIfElse"],["eventList",""],["emptyState",""],[2,"display","flex","align-items","center","justify-content","center","margin","300px 0"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["id","ongoing-body",4,"ngIf","ngIfElse"],["id","ongoing-body"],[3,"ngClass","eventInfo","click",4,"ngFor","ngForOf"],[3,"ngClass","eventInfo","click"],[3,"emptyMessage"]],template:function(t,i){if(1&t&&(e.YNc(0,Z,4,0,"div",0),e.YNc(1,w,1,2,"ng-template",null,1,e.W1O),e.YNc(3,A,2,2,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.isFetchingEvents)("ngIfElse",a)}},directives:[r.O5,r.sg,u,r.mk,_],styles:["#ongoing-body[_ngcontent-%COMP%]{display:none;padding:32px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px;margin-top:200px}#ongoing-body[_ngcontent-%COMP%]:not(:empty){display:grid;grid-gap:2rem 1.25rem;gap:2rem 1.25rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}#ongoing-body[_ngcontent-%COMP%]:not(:empty) + .empty-state[_ngcontent-%COMP%]{display:none}"]}),n})();function q(n,s){1&n&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"span",5),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}const I=function(n){return{selected:n}};function k(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-event-card-view",9),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(3).openDetailsPane(o)}),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(2,I,i.selectedEventCard==t.event_id))("eventInfo",t)}}function F(n,s){if(1&n&&(e.TgZ(0,"div",7),e.YNc(1,k,1,4,"app-event-card-view",8),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.pastEvents)}}function Y(n,s){if(1&n&&e.YNc(0,F,2,1,"div",6),2&n){const t=e.oxw(),i=e.MAs(4);e.Q6J("ngIf",!t.isFetchingEvents&&t.pastEvents.length>0)("ngIfElse",i)}}const L=function(){return{title:"No events yet...",message:"Click the button at the side navigation bar to create an event"}};function N(n,s){1&n&&(e.TgZ(0,"div",3),e._UZ(1,"app-empty-state",10),e.qZA()),2&n&&(e.xp6(1),e.Q6J("emptyMessage",e.DdM(1,L)))}let Q=(()=>{class n{constructor(t,i,a){this.userService=t,this.dataService=i,this.detailsPaneService=a,this.searchText="",this.pastEvents=[],this.isFetchingEvents=!0,this.detailsPaneService.detailsPaneInfoChange.subscribe(o=>{this.selectedEventCard=o.dpEventID})}ngOnInit(){this.fetchPastEvents()}fetchPastEvents(){var t=this;const i=new l.K;i.EndPoint="/events/past",i.requestType=5,i.authToken=this.userService.HttpOptions,this.dataService.httpRequest(i).subscribe(function(){var a=(0,g.Z)(function*(o){t.setOngoingEvents(o),console.log(t.pastEvents),t.isFetchingEvents=!1,t.sortEvents()});return function(o){return a.apply(this,arguments)}}(),function(){var a=(0,g.Z)(function*(o){"Unauthorized"==o.statusText?(t.userService.refreshAccessToken(),t.userService.start()):(t.dataService.handleError(o),t.isFetchingEvents=!1)});return function(o){return a.apply(this,arguments)}}())}setOngoingEvents(t){this.pastEvents=t}sortEvents(){this.pastEvents.sort((t,i)=>new Date(i.event_start_date.split("[")[0]).valueOf()-new Date(t.event_start_date.split("[")[0]).valueOf())}openDetailsPane(t){this.detailsPaneService.showDetailsPane(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.K),e.Y36(m.D),e.Y36(d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-past"]],decls:5,vars:2,consts:[["style","display: flex; align-items: center; justify-content: center; margin: 300px 0;",4,"ngIf","ngIfElse"],["eventList",""],["emptyState",""],[2,"display","flex","align-items","center","justify-content","center","margin","300px 0"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["id","past-body",4,"ngIf","ngIfElse"],["id","past-body"],[3,"ngClass","eventInfo","click",4,"ngFor","ngForOf"],[3,"ngClass","eventInfo","click"],[3,"emptyMessage"]],template:function(t,i){if(1&t&&(e.YNc(0,q,4,0,"div",0),e.YNc(1,Y,1,2,"ng-template",null,1,e.W1O),e.YNc(3,N,2,2,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.isFetchingEvents)("ngIfElse",a)}},directives:[r.O5,r.sg,u,r.mk,_],styles:["#past-body[_ngcontent-%COMP%]{display:none;padding:32px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px;margin-top:200px}#past-body[_ngcontent-%COMP%]:not(:empty){display:grid;grid-gap:2rem 1.25rem;gap:2rem 1.25rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}#past-body[_ngcontent-%COMP%]:not(:empty) + .empty-state[_ngcontent-%COMP%]{display:none}"]}),n})();var z=c(8576);function V(n,s){1&n&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"span",5),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}const j=function(n){return{selected:n}};function K(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-event-card-view",9),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(3).openDetailsPane(o)}),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(2,j,i.selectedEventCard==t.event_id))("eventInfo",t)}}function H(n,s){if(1&n&&(e.TgZ(0,"div",7),e.YNc(1,K,1,4,"app-event-card-view",8),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.upcomingEvents)}}function R(n,s){if(1&n&&e.YNc(0,H,2,1,"div",6),2&n){const t=e.oxw(),i=e.MAs(4);e.Q6J("ngIf",!t.isFetchingEvents&&t.upcomingEvents.length>0)("ngIfElse",i)}}const W=function(){return{title:"No events yet...",message:"Click the button at the side navigation bar to create an event"}};function X(n,s){1&n&&(e.TgZ(0,"div",3),e._UZ(1,"app-empty-state",10),e.qZA()),2&n&&(e.xp6(1),e.Q6J("emptyMessage",e.DdM(1,W)))}const G=[{path:"",component:x,children:[{path:"ongoing",component:U},{path:"upcoming",component:(()=>{class n{constructor(t,i,a){this.userService=t,this.dataService=i,this.detailsPaneService=a,this.crypto=new z.w,this.searchText="",this.upcomingEvents=[],this.isFetchingEvents=!0,this.detailsPaneService.detailsPaneInfoChange.subscribe(o=>{this.selectedEventCard=o.dpEventID})}ngOnInit(){this.fetchUpcomingEvents()}fetchUpcomingEvents(){var t=this;const i=new l.K;i.EndPoint="/events/upcoming",i.requestType=5,i.authToken=this.userService.HttpOptions,this.dataService.httpRequest(i).subscribe(function(){var a=(0,g.Z)(function*(o){yield t.setOngoingEvents(o),yield console.log(t.upcomingEvents),t.isFetchingEvents=!1,t.sortEvents()});return function(o){return a.apply(this,arguments)}}(),function(){var a=(0,g.Z)(function*(o){"Unauthorized"==o.statusText?(t.userService.refreshAccessToken(),t.userService.start()):(t.dataService.handleError(o),t.isFetchingEvents=!1)});return function(o){return a.apply(this,arguments)}}())}setOngoingEvents(t){this.upcomingEvents=t}sortEvents(){this.upcomingEvents.sort((t,i)=>new Date(t.event_start_date.split("[")[0]).valueOf()-new Date(i.event_start_date.split("[")[0]).valueOf())}openDetailsPane(t){this.detailsPaneService.showDetailsPane(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.K),e.Y36(m.D),e.Y36(d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-upcoming"]],decls:5,vars:2,consts:[["style","display: flex; align-items: center; justify-content: center; margin: 300px 0;",4,"ngIf","ngIfElse"],["eventList",""],["emptyState",""],[2,"display","flex","align-items","center","justify-content","center","margin","300px 0"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["id","upcoming-body",4,"ngIf","ngIfElse"],["id","upcoming-body"],[3,"ngClass","eventInfo","click",4,"ngFor","ngForOf"],[3,"ngClass","eventInfo","click"],[3,"emptyMessage"]],template:function(t,i){if(1&t&&(e.YNc(0,V,4,0,"div",0),e.YNc(1,R,1,2,"ng-template",null,1,e.W1O),e.YNc(3,X,2,2,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.isFetchingEvents)("ngIfElse",a)}},directives:[r.O5,r.sg,u,r.mk,_],styles:["#upcoming-body[_ngcontent-%COMP%]{display:none;padding:32px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px;margin-top:200px}#upcoming-body[_ngcontent-%COMP%]:not(:empty){display:grid;grid-gap:2rem 1.25rem;gap:2rem 1.25rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}#upcoming-body[_ngcontent-%COMP%]:not(:empty) + .empty-state[_ngcontent-%COMP%]{display:none}"]}),n})()},{path:"past",component:Q}]}];let B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(G)],p.Bz]}),n})();var ee=c(4466);let te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,B,ee.m]]}),n})()}}]);