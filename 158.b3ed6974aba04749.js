"use strict";(self.webpackChunkGCSEAMS=self.webpackChunkGCSEAMS||[]).push([[158],{8158:(_,h,s)=>{s.r(h),s.d(h,{DashboardModule:()=>f});var c=s(9808),g=s(8118),l=s(5861),d=s(2033),u=s(4012),t=s(1223),m=s(968),p=s(555),A=s(1472);function Z(i,o){if(1&i&&(t.TgZ(0,"tr",29),t.TgZ(1,"th",30),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",31),t._uU(13),t.qZA(),t.TgZ(14,"td",31),t._uU(15),t.qZA(),t.TgZ(16,"td",31),t._uU(17),t.qZA(),t.TgZ(18,"td",31),t._uU(19),t.qZA(),t.TgZ(20,"td",31),t._uU(21),t.qZA(),t.qZA()),2&i){const n=o.$implicit,e=t.oxw();t.Q6J("routerLink",n.event_uuid),t.xp6(2),t.Oqu(n.event_id),t.xp6(2),t.Oqu(n.event_title),t.xp6(2),t.Oqu(t.lcZ(7,11,e.getEventDate(n.event_start_date))),t.xp6(3),t.AsE("",t.xi3(10,13,e.getEventStartTime(n.event_start_date),"h:mm a")," - ",t.xi3(11,16,e.getEventEndTime(n.event_end_date),"h:mm a"),""),t.xp6(4),t.hij("",n.seminar_hours," hr"),t.xp6(2),t.Oqu(null!=n.overallAnalytics&&n.overallAnalytics.invited?n.overallAnalytics.invited:0),t.xp6(2),t.Oqu(null!=n.overallAnalytics&&n.overallAnalytics.views?n.overallAnalytics.views:0),t.xp6(2),t.Oqu(null!=n.overallAnalytics&&n.overallAnalytics.registered?n.overallAnalytics.registered:0),t.xp6(2),t.Oqu(null!=n.overallAnalytics&&n.overallAnalytics.attendees?n.overallAnalytics.attendees:0)}}const v=function(i){return[i,350]},T=[{path:"",component:(()=>{class i{constructor(n,e){this.dataService=n,this.userService=e,this.eventsSummary=[],this.byDepartment=[],this.byCourse=[],this.multi1=[],this.multi2=[],this.multi=[{name:"CCS",series:[{name:"Viewed",value:Math.floor(85)},{name:"Registered",value:Math.floor(.702*100)},{name:"Attended",value:Math.floor(62.3)}]},{name:"CEAS",series:[{name:"Viewed",value:Math.floor(64)},{name:"Registered",value:Math.floor(.56*100)},{name:"Attended",value:Math.floor(49)}]},{name:"CHTM",series:[{name:"Viewed",value:Math.floor(1280/1860*100)},{name:"Registered",value:Math.floor(1120/1860*100)},{name:"Attended",value:Math.floor(980/1860*100)}]},{name:"CBA",series:[{name:"Viewed",value:Math.floor(700/820*100)},{name:"Registered",value:Math.floor(550/820*100)},{name:"Attended",value:Math.floor(482/820*100)}]},{name:"CAHS",series:[{name:"Viewed",value:Math.floor(986/1126*100)},{name:"Registered",value:Math.floor(702/1126*100)},{name:"Attended",value:Math.floor(558/1126*100)}]}],this.count=1,this.summary={total_number_of_events_conducted:0,total_number_of_seminar_hours_given:0,total_number_of_views:0}}ngOnInit(){this.fetchEvents(),this.getAnalyticsSummary(),this.getEventAnalyticsByDepartment(),this.getEventAnalyticsByCourse()}getEventAnalyticsByDepartment(){var n=this;const e=new d.K;e.EndPoint="analytics/department",e.RequestType=u.l.GET_REQUIRES_AUTHENTICATION,e.AuthToken=this.userService.HttpOptions,this.dataService.httpRequest(e).subscribe(function(){var a=(0,l.Z)(function*(r){n.setAnalyticsByDepartmentData(r)});return function(r){return a.apply(this,arguments)}}())}setAnalyticsByDepartmentData(n){for(let e of n)this.multi1.push({name:e.department_code,series:[{name:"Viewed",value:e.views>0?e.views/e.invited*100:0},{name:"Registered",value:e.views>0?e.registered/e.invited*100:0},{name:"Attended",value:e.views>0?e.attendees/e.invited*100:0}]});this.multi1=[...this.multi1],console.log("multi1 value:"),console.log(this.multi1)}getEventAnalyticsByCourse(){var n=this;const e=new d.K;e.EndPoint="analytics/course",e.RequestType=u.l.GET_REQUIRES_AUTHENTICATION,e.AuthToken=this.userService.HttpOptions,this.dataService.httpRequest(e).subscribe(function(){var a=(0,l.Z)(function*(r){n.setAnalyticsByCourseData(r)});return function(r){return a.apply(this,arguments)}}())}setAnalyticsByCourseData(n){for(let e of n)this.multi2.push({name:e.course_code,series:[{name:"Viewed",value:e.views>0?e.views/e.invited*100:0},{name:"Registered",value:e.registered>0?e.registered/e.invited*100:0},{name:"Attended",value:e.attendees>0?e.attendees/e.invited*100:0}]});this.multi2=[...this.multi2],console.log("multi2 value:"),console.log(this.multi2)}fetchEvents(){var n=this;const e=new d.K;e.EndPoint="events/past",e.RequestType=u.l.GET_REQUIRES_AUTHENTICATION,e.AuthToken=this.userService.HttpOptions,this.dataService.httpRequest(e).subscribe(function(){var a=(0,l.Z)(function*(r){n.eventsSummary=r,n.getBestDay(n.linkAnalyticsData())});return function(r){return a.apply(this,arguments)}}())}getAnalyticsSummary(){var n=this;const e=new d.K;e.EndPoint="analytics/dashboard",e.RequestType=u.l.GET_REQUIRES_AUTHENTICATION,e.AuthToken=this.userService.HttpOptions,this.dataService.httpRequest(e).subscribe(function(){var a=(0,l.Z)(function*(r){n.summary=r});return function(r){return a.apply(this,arguments)}}())}getBestDay(n){console.log(n);let e=[];n.forEach(a=>{e.push(`${this.getEventDate(a.event_start_date).getDay()}:${null==a?void 0:a.overallAnalytics}`)});for(let a of n)console.log(0);console.log(e)}getEventDate(n){const a=n.split("[")[0].toString();return new Date(a)}getEventStartTime(n){const a=n.split("[")[0].toString();return new Date(a)}getEventEndTime(n){const a=n.split("[")[0].toString();return new Date(a)}linkAnalyticsData(){for(let n of this.eventsSummary){n.event_id=this.count++;const e=new d.K;e.EndPoint=`analytics/${n.event_uuid}`,e.RequestType=u.l.GET_REQUIRES_AUTHENTICATION,e.AuthToken=this.userService.HttpOptions,this.dataService.httpRequest(e).subscribe(function(){var a=(0,l.Z)(function*(r){n.overallAnalytics=r});return function(r){return a.apply(this,arguments)}}())}return this.eventsSummary}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(m.D),t.Y36(p.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dashboard"]],decls:74,vars:16,consts:[["id","dashboard-body"],[1,"gs-header"],[1,"gs-cards-body"],[1,"row","g-4"],[1,"col-xxl-4","col-xl-6"],[1,"gs-card","dashboard-card","bg-primary","text-light","border-0"],[1,"dashboard-card-icon-bg","bg-white",2,"--bs-bg-opacity","0.12"],[1,"bi","bi-calendar3-event","mb-0"],[1,"d-flex","flex-column","justify-content-center"],[1,"mb-1","fw-bolder"],[1,"mb-0"],[1,"gs-card","dashboard-card","bg-danger","text-light","border-0"],[1,"bi","bi-clock","mb-0"],[1,"col-xxl-4","col-xl-12"],[1,"gs-card","dashboard-card","bg-warning","border-0"],[1,"dashboard-card-icon-bg","bg-white",2,"--bs-bg-opacity","0.2"],[1,"bi","bi-eye","mb-0"],[1,"col-12"],[1,"gs-card"],[1,"gs-card-header"],[1,"d-flex","align-items-center","m-0"],[1,"gs-card-content"],["containerRef",""],[3,"dimension","xAxisLabel","yAxisLabel","summarizedData"],[1,"gs-card","tables-card"],[1,"table","table-hover","table-click","dashboard-table"],["scope","col"],["scope","col",1,"text-end"],["style","cursor: pointer",3,"routerLink",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"routerLink"],["scope","row"],[1,"text-end"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h2"),t._uU(3,"Dashboard"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t._UZ(9,"h1",7),t.qZA(),t.TgZ(10,"div",8),t.TgZ(11,"h1",9),t._uU(12),t.qZA(),t.TgZ(13,"p",10),t._uU(14,"Total Events Conducted"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",11),t.TgZ(17,"div",6),t._UZ(18,"h1",12),t.qZA(),t.TgZ(19,"div",8),t.TgZ(20,"h1",9),t._uU(21),t.qZA(),t.TgZ(22,"p",10),t._uU(23,"Total Seminar Hours Rendered"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",13),t.TgZ(25,"div",14),t.TgZ(26,"div",15),t._UZ(27,"h1",16),t.qZA(),t.TgZ(28,"div",8),t.TgZ(29,"h1",9),t._uU(30),t.qZA(),t.TgZ(31,"p",10),t._uU(32,"Total Views"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",17),t.TgZ(34,"div",18),t.TgZ(35,"div",19),t.TgZ(36,"h5",20),t._uU(37,"Percentage of Students Participation per Department"),t.qZA(),t.qZA(),t.TgZ(38,"div",21,22),t._UZ(40,"app-grouped-vertical-bar-chart",23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",17),t.TgZ(42,"div",18),t.TgZ(43,"div",19),t.TgZ(44,"h5",20),t._uU(45,"Percentage of Students Participation per Program"),t.qZA(),t.qZA(),t.TgZ(46,"div",21,22),t._UZ(48,"app-grouped-vertical-bar-chart",23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",17),t.TgZ(50,"div",24),t.TgZ(51,"table",25),t.TgZ(52,"thead"),t.TgZ(53,"tr"),t.TgZ(54,"th",26),t._uU(55,"No."),t.qZA(),t.TgZ(56,"th",26),t._uU(57,"Event Name"),t.qZA(),t.TgZ(58,"th",26),t._uU(59,"Date"),t.qZA(),t.TgZ(60,"th",26),t._uU(61,"Time"),t.qZA(),t.TgZ(62,"th",27),t._uU(63,"Seminar Hours"),t.qZA(),t.TgZ(64,"th",27),t._uU(65,"Invited"),t.qZA(),t.TgZ(66,"th",27),t._uU(67,"Views"),t.qZA(),t.TgZ(68,"th",27),t._uU(69,"Registrants"),t.qZA(),t.TgZ(70,"th",27),t._uU(71,"Attended"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"tbody"),t.YNc(73,Z,22,19,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const a=t.MAs(39);t.xp6(12),t.Oqu(e.summary.total_number_of_events_conducted),t.xp6(9),t.hij("",e.summary.total_number_of_seminar_hours_given," hrs"),t.xp6(9),t.Oqu(e.summary.total_number_of_views),t.xp6(10),t.Q6J("dimension",t.VKq(12,v,a.offsetWidth-50))("xAxisLabel","Departments")("yAxisLabel","Student Population Percentage")("summarizedData",e.multi1),t.xp6(8),t.Q6J("dimension",t.VKq(14,v,a.offsetWidth-50))("xAxisLabel","Programs")("yAxisLabel","Student Population Percentage")("summarizedData",e.multi2),t.xp6(25),t.Q6J("ngForOf",e.eventsSummary)}},directives:[A.c,c.sg,g.rH],pipes:[c.uU],styles:["#dashboard-body[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.gs-cards-body[_ngcontent-%COMP%]{--spacing: 32px;display:inline-flex;flex-direction:column;gap:var(--spacing);width:100%;padding:var(--spacing)}.gs-card[_ngcontent-%COMP%]{overflow:auto}.dashboard-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:200px;padding:48px}.dashboard-card-icon-bg[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:100%;margin-right:48px;aspect-ratio:1/1}.tables-card[_ngcontent-%COMP%]{height:500px}.table[_ngcontent-%COMP%]{--spacing: 24px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;box-shadow:0 1px #000}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{white-space:nowrap}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:var(--spacing)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:var(--spacing)}"]}),i})()}];let y=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.Bz.forChild(T)],g.Bz]}),i})();var b=s(2103);let f=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,y,b.pT]]}),i})()}}]);