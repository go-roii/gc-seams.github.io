"use strict";(self.webpackChunkGCSEAMS=self.webpackChunkGCSEAMS||[]).push([[80],{4080:(T,p,a)=>{a.r(p),a.d(p,{CreateEventModule:()=>w});var m=a(9808),v=a(8118),h=a(5861),r=a(2382),C=a(2033),d=a(7796),e=a(1223),g=a(4745),E=a(555);function f(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-event-card-edit",10),e.NdJ("onDuplicate",function(i){return e.CHM(t),e.oxw().duplicateEvent(i)})("onDelete",function(i){return e.CHM(t),e.oxw().deleteEvent(i)}),e.qZA()}if(2&n){const t=s.index,o=e.oxw();e.Q6J("eventIndex",t)("duplicatedEventFormData",o.duplicatedEventFormData)}}const y=[{path:"",component:(()=>{class n{constructor(t,o,i){this.router=t,this.dataService=o,this.userService=i,this.isEventFormDirty=!1,this.isEventCreating=!1,this.count=0,this.events=[{event:d.x}],this.courses=[],this.departments=[],this.sortBy=""}ngOnInit(){this.departments=this.userService.getDepartments(),console.log(this.departments)}createEvents(){var t=this;this.isEventCreating=!0,this.printInputs();const o=new C.K;o.EndPoint="event",o.requestType=4,o.AuthToken=this.userService.HttpOptions,this.EventCardEditComponents.forEach((i,l)=>{console.log(l),console.log(i.event),o.body=i.event,this.dataService.httpRequest(o).subscribe(function(){var u=(0,h.Z)(function*(c){yield console.log(c),t.isEventCreating=!1,yield t.router.navigateByUrl("/home/events/upcoming")});return function(c){return u.apply(this,arguments)}}(),function(){var u=(0,h.Z)(function*(c){"Unauthorized"==c.statusText?(t.userService.refreshAccessToken(),t.userService.start()):(yield t.dataService.handleError(c),t.isEventCreating=!1)});return function(c){return u.apply(this,arguments)}}())})}printInputs(){console.log(this.events)}addEvent(){this.events.push({event:d.x}),this.duplicatedEventFormData=new r.cw({eventName:new r.NI("",[r.kI.required]),eventDetails:new r.NI("",r.kI.required),eventDate:new r.NI("",[r.kI.required]),eventStartTime:new r.NI("",[r.kI.required]),eventEndTime:new r.NI("",[r.kI.required]),eventSeminarHours:new r.NI(0),eventIsStrict:new r.NI(!0),eventSpeakers:new r.NI("",[r.kI.required]),departments:new r.NI(""),eventRegistrationForm:new r.NI("",[r.kI.required])})}duplicateEvent(t){this.duplicatedEventFormData=this.EventCardEditComponents.toArray()[t].eventForm,this.events.splice(t,0,{event:d.x})}deleteEvent(t){this.events.splice(t,1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.F0),e.Y36(g.D),e.Y36(E.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-event"]],viewQuery:function(t,o){if(1&t&&e.Gf(d.x,5),2&t){let i;e.iGM(i=e.CRH())&&(o.EventCardEditComponents=i)}},decls:14,vars:1,consts:[["id","create-event-body"],[1,"gs-header"],[1,"gs-header-buttons"],[1,"btn","btn-outline-primary","rounded-pill",3,"click"],[1,"bi","bi-plus-lg"],[1,"btn","btn-primary","rounded-pill","shadow",3,"click"],[1,"gs-cards-body"],[3,"eventIndex","duplicatedEventFormData","onDuplicate","onDelete",4,"ngFor","ngForOf"],["id","new-event",1,"gs-card",3,"click"],[1,"bi","bi-plus-square-fill"],[3,"eventIndex","duplicatedEventFormData","onDuplicate","onDelete"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2"),e._uU(3,"Create Event"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return o.addEvent()}),e._UZ(6,"i",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return o.createEvents()}),e._uU(8,"Create"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.YNc(10,f,1,2,"app-event-card-edit",7),e.TgZ(11,"div",8),e.NdJ("click",function(){return o.addEvent()}),e.TgZ(12,"span"),e._UZ(13,"i",9),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngForOf",o.events))},directives:[m.sg,d.x],styles:["#create-event-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}.gs-cards-body[_ngcontent-%COMP%]{--spacing: 32px;display:inline-flex;flex-direction:row;gap:var(--spacing);height:100%;overflow-x:scroll;padding:var(--spacing)}#new-event[_ngcontent-%COMP%]{--width: 500px;position:relative;width:var(--width);min-width:var(--width);color:var(--bs-gray-500);border:2px dashed var(--bs-gray-500);cursor:pointer}#new-event[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-100)}#new-event[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:64px}"]}),n})()}];let _=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.Bz.forChild(y)],v.Bz]}),n})();var x=a(4466);let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,_,x.m]]}),n})()}}]);