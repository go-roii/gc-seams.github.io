"use strict";(self.webpackChunkGCSEAMS=self.webpackChunkGCSEAMS||[]).push([[80],{4080:(x,u,a)=>{a.r(u),a.d(u,{CreateEventModule:()=>Z});var m=a(9808),c=a(8118),h=a(5861),r=a(2382),g=a(2033),v=a(7796),e=a(1223),C=a(968),E=a(555),f=a(2152);function y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-event-card-edit",11),e.NdJ("onDuplicate",function(o){return e.CHM(t),e.oxw().duplicateEvent(o)})("onDelete",function(o){return e.CHM(t),e.oxw().deleteEvent(o)}),e.qZA()}if(2&n){const t=s.index,i=e.oxw();e.Q6J("eventIndex",t)("duplicatedEventData",i.duplicatedEventData)}}const _=[{path:"",component:(()=>{class n{constructor(t,i,o){this.router=t,this.dataService=i,this.userService=o,this.isEventFormDirty=!1,this.isEventCreating=!1,this.count=0,this.events=[{event:v.x}],this.courses=[],this.departments=[],this.sortBy=""}ngOnInit(){this.departments=this.userService.getDepartments(),console.log(this.departments)}createEvents(){var t=this;this.isEventCreating=!0,this.printInputs();const i=new g.K;i.EndPoint="event",i.requestType=4,i.AuthToken=this.userService.HttpOptions,this.EventCardEditComponents.forEach((o,l)=>{console.log(l),console.log(o.event),i.body=o.event,this.dataService.httpRequest(i).subscribe(function(){var p=(0,h.Z)(function*(d){yield console.log(d),t.isEventCreating=!1,yield t.router.navigateByUrl("/home/events/upcoming")});return function(d){return p.apply(this,arguments)}}(),function(){var p=(0,h.Z)(function*(d){"Unauthorized"==d.statusText?(t.userService.refreshAccessToken(),t.userService.start()):(yield t.dataService.handleError(d),t.isEventCreating=!1)});return function(d){return p.apply(this,arguments)}}())})}printInputs(){console.log(this.events)}addEvent(){this.events.push({event:v.x}),this.duplicatedEventData=new r.cw({eventPoster:new r.NI,eventName:new r.NI("",[r.kI.required]),eventDetails:new r.NI("",r.kI.required),eventDate:new r.NI("",[r.kI.required]),eventStartTime:new r.NI("",[r.kI.required]),eventEndTime:new r.NI("",[r.kI.required]),eventSeminarHours:new r.NI(0),eventIsStrict:new r.NI(!0),eventInvitedDeparments:new r.NI([],[r.kI.required]),eventSpeakers:new r.NI([],[r.kI.required]),departments:new r.NI(""),eventRegistrationForm:new r.NI("",[r.kI.required])})}duplicateEvent(t){this.duplicatedEventData={eventForm:this.EventCardEditComponents.toArray()[t].eventForm,event_poster_link:this.EventCardEditComponents.toArray()[t].event.event_poster_link},this.events.splice(t,0,{event:v.x})}deleteEvent(t){this.events.splice(t,1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.F0),e.Y36(C.D),e.Y36(E.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-event"]],viewQuery:function(t,i){if(1&t&&e.Gf(v.x,5),2&t){let o;e.iGM(o=e.CRH())&&(i.EventCardEditComponents=o)}},decls:15,vars:3,consts:[["id","create-event-body"],[1,"gs-header"],[1,"gs-header-buttons"],[1,"btn","btn-outline-primary","rounded-pill",3,"click"],[1,"bi","bi-plus-lg"],[1,"btn","btn-primary","rounded-pill","shadow",3,"disabled","click"],[3,"showSpinner"],[1,"gs-cards-body"],[3,"eventIndex","duplicatedEventData","onDuplicate","onDelete",4,"ngFor","ngForOf"],["id","new-event",1,"gs-card",3,"click"],[1,"bi","bi-plus-square-fill"],[3,"eventIndex","duplicatedEventData","onDuplicate","onDelete"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2"),e._uU(3,"Create Event"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return i.addEvent()}),e._UZ(6,"i",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return i.createEvents()}),e._uU(8," Create "),e._UZ(9,"app-loading-spinner",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.YNc(11,y,1,2,"app-event-card-edit",8),e.TgZ(12,"div",9),e.NdJ("click",function(){return i.addEvent()}),e.TgZ(13,"span"),e._UZ(14,"i",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("disabled",i.isEventCreating),e.xp6(2),e.Q6J("showSpinner",i.isEventCreating),e.xp6(2),e.Q6J("ngForOf",i.events))},directives:[f.g,m.sg,v.x],styles:["#create-event-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}.gs-cards-body[_ngcontent-%COMP%]{--spacing: 32px;display:inline-flex;flex-direction:row;gap:var(--spacing);height:100%;overflow-x:scroll;padding:var(--spacing)}#new-event[_ngcontent-%COMP%]{--width: 500px;position:relative;width:var(--width);min-width:var(--width);color:var(--bs-gray-500);border:2px dashed var(--bs-gray-500);cursor:pointer}#new-event[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-100)}#new-event[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:64px}"]}),n})()}];let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),n})();var I=a(4466);let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,w,I.m]]}),n})()}}]);