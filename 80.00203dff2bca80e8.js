"use strict";(self.webpackChunkGCSEAMS=self.webpackChunkGCSEAMS||[]).push([[80],{4080:(x,p,s)=>{s.r(p),s.d(p,{CreateEventModule:()=>b});var u=s(9808),c=s(8118),h=s(5861),E=s(2033),d=s(7796),e=s(1223),C=s(968),g=s(555),m=s(2152);function f(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-event-card-edit",11),e.NdJ("onDuplicate",function(r){return e.CHM(t),e.oxw().duplicateEvent(r)})("onDelete",function(r){return e.CHM(t),e.oxw().deleteEvent(r)}),e.qZA()}if(2&i){const t=o.index,n=e.oxw();e.Q6J("eventIndex",t)("totalEvents",n.events.length)("isEventEditable",!0)("duplicatedEventData",n.duplicatedEventData)}}const y=[{path:"",component:(()=>{class i{constructor(t,n,r,v){this.router=t,this.dataService=n,this.userService=r,this.ref=v,this.isEventValid=[],this.isEventCreating=!1,this.count=0,this.events=[{event:d.x}],this.courses=[],this.departments=[],this.sortBy=""}ngOnInit(){this.departments=this.userService.getDepartments(),console.log(this.departments),this.ref.detectChanges()}ngDoCheck(){var t;this.isEventValid=[],null===(t=this.EventCardEditComponents)||void 0===t||t.forEach(n=>{this.isEventValid.push(n.eventForm.valid)}),this.isEventValid=this.isEventValid.every(n=>n)}createEvents(){var t=this;this.isEventCreating=!0,this.printInputs();const n=new E.K;n.EndPoint="event",n.requestType=4,n.AuthToken=this.userService.HttpOptions,this.EventCardEditComponents.forEach((r,v)=>{console.log(v),console.log(r.event),n.body=r.event,n.body.departments=n.body.departments.filter(l=>l),this.dataService.httpRequest(n).subscribe(function(){var l=(0,h.Z)(function*(a){yield console.log(a),t.isEventCreating=!1,yield t.router.navigateByUrl("/home/events/upcoming")});return function(a){return l.apply(this,arguments)}}(),function(){var l=(0,h.Z)(function*(a){"Unauthorized"==a.statusText?(t.userService.refreshAccessToken(),t.userService.start()):(yield t.dataService.handleError(a),t.isEventCreating=!1)});return function(a){return l.apply(this,arguments)}}())})}printInputs(){console.log(this.events)}addEvent(){this.events.push({event:d.x}),this.duplicatedEventData=void 0,this.ref.detectChanges()}duplicateEvent(t){this.duplicatedEventData={eventForm:this.EventCardEditComponents.toArray()[t].eventForm,event_poster_link:this.EventCardEditComponents.toArray()[t].event.event_poster_link},this.events.splice(t,0,{event:d.x}),this.ref.detectChanges()}deleteEvent(t){this.events.splice(t,1),this.ref.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.F0),e.Y36(C.D),e.Y36(g.K),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-event"]],viewQuery:function(t,n){if(1&t&&e.Gf(d.x,5),2&t){let r;e.iGM(r=e.CRH())&&(n.EventCardEditComponents=r)}},decls:15,vars:3,consts:[["id","create-event-body"],[1,"gs-header"],[1,"gs-header-buttons"],[1,"btn","btn-outline-primary","rounded-pill",3,"click"],[1,"bi","bi-plus-lg"],[1,"btn","btn-primary","rounded-pill","shadow",3,"disabled","click"],[3,"showSpinner"],[1,"gs-cards-body"],[3,"eventIndex","totalEvents","isEventEditable","duplicatedEventData","onDuplicate","onDelete",4,"ngFor","ngForOf"],["id","new-event",1,"gs-card",3,"click"],[1,"bi","bi-plus-square-fill"],[3,"eventIndex","totalEvents","isEventEditable","duplicatedEventData","onDuplicate","onDelete"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2"),e._uU(3,"Create Event"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.addEvent()}),e._UZ(6,"i",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.createEvents()}),e._uU(8," Create "),e._UZ(9,"app-loading-spinner",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.YNc(11,f,1,4,"app-event-card-edit",8),e.TgZ(12,"div",9),e.NdJ("click",function(){return n.addEvent()}),e.TgZ(13,"span"),e._UZ(14,"i",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("disabled",!n.isEventValid||n.isEventCreating),e.xp6(2),e.Q6J("showSpinner",n.isEventCreating),e.xp6(2),e.Q6J("ngForOf",n.events))},directives:[m.g,u.sg,d.x],styles:["#create-event-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}.gs-cards-body[_ngcontent-%COMP%]{--spacing: 32px;display:inline-flex;flex-direction:row;gap:var(--spacing);height:100%;overflow-x:scroll;padding:var(--spacing)}#new-event[_ngcontent-%COMP%]{--width: 500px;position:relative;width:var(--width);min-width:var(--width);color:var(--bs-gray-500);border:2px dashed var(--bs-gray-500);cursor:pointer}#new-event[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-100)}#new-event[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:64px}"]}),i})()}];let _=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),i})();var Z=s(4466);let b=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[u.ez,_,Z.m]]}),i})()}}]);